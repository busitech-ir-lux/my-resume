---
import resume from "../content/resume.json";
---

<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>{resume.name}</title>

    <link rel="stylesheet" href="/styles.css" />
    <!-- icons.css is not needed if you're using Iconify; keep only if you still use it elsewhere -->
    <!-- <link rel="stylesheet" href="/icons.css" /> -->

    <script src="/theme.js" defer></script>
    <script src="/skills.js" defer></script>

    <!-- Iconify (for location/mail/social icons) -->
    <script
      src="https://cdn.jsdelivr.net/npm/iconify-icon@1.0.8/dist/iconify-icon.min.js"
      defer></script>
  </head>

  <body>
    <div class="page-shell">
      <aside class="side-rail pdf-hide" aria-label="Page controls">
        <label class="theme-switch" title="Toggle theme">
          <input type="checkbox" id="themeToggle" />
          <span class="slider"></span>
        </label>

        <a
          class="rail-btn"
          href="resume.pdf"
          target="_blank"
          rel="noopener noreferrer"
          title="Download PDF"
        >
          PDF
        </a>
      </aside>

      <main class="resume-wrap">
        <!-- HEADER -->
        <section class="card header">
          <div class="header-left">
            <h1>{resume.name}</h1>
            <p class="muted">{resume.title}</p>

            <div class="meta">
              {
                resume.location && (
                  <div class="meta-row">
                    <iconify-icon
                      icon="material-symbols:location-on-outline"
                      width="20"
                      height="20"
                    />
                    <span>{resume.location}</span>
                  </div>
                )
              }

              {
                resume.email && (
                  <div class="meta-row">
                    <iconify-icon
                      icon="material-symbols:mail-outline"
                      width="20"
                      height="20"
                    />
                    <a href={`mailto:${resume.email}`}>{resume.email}</a>
                  </div>
                )
              }

              {
                resume.phone && (
                  <div class="meta-row">
                    <iconify-icon
                      icon="material-symbols:call-outline"
                      width="20"
                      height="20"
                    />
                    <a href={`tel:${resume.phone.replace(/\s+/g,"")}`}>{resume.phone}</a>
                  </div>
                )
              }
            </div>
          </div>

          <div class="header-right">
            {
              resume.image && (
                <div class="avatar-wrap">
                  <img src={resume.image} class="avatar" alt={resume.name} />
                </div>
              )
            }

            {
              resume.social?.length ? (
                <div class="social-vert" aria-label="Social links">
                  {resume.social.map((s) => (
                    <a
                      class="social-icon"
                      data-icon={s.icon}
                      href={s.url}
                      target="_blank"
                      rel="noopener noreferrer"
                      aria-label={s.label || s.icon}
                      title={s.label || s.icon}
                    >
                      <iconify-icon icon={s.icon} width="20" height="20" />
                    </a>
                  ))}
                </div>
              ) : null
            }
          </div>
        </section>

        <!-- SUMMARY -->
        <section class="card">
          <h2>Summary</h2>
          <p>{resume.summary}</p>
        </section>

        <!-- TWO COLUMN: EXPERIENCE + RIGHT PANE -->
        <div class="grid-2">
          <!-- Experience -->
          <section class="card">
            <h2>Experience</h2>

            {
              resume.experience?.map((exp) => (
                <div class="item card">
                  <div class="item-head">
                    <strong>{exp.role}</strong>
                    <span class="muted">
                      {exp.company} · {exp.period}
                    </span>
                  </div>

                  <ul>
                    {exp.points?.map((p) => (
                      <li>{p}</li>
                    ))}
                  </ul>
                </div>
              ))
            }
          </section>

          <!-- Right pane (boxed cards) -->
          <div class="right-pane">
            {/* Skills box */}
            <section class="card right-box">
              <h2>Skills</h2>

              {
                resume.skills?.map((skill) => (
                  <div class="skill">
                    <div class="skill-header">
                      <span>{skill.name}</span>
                      <span class="muted">{skill.level}%</span>
                    </div>
                    <div class="skill-bar">
                      <div class="skill-fill" data-level={skill.level} />
                    </div>
                  </div>
                ))
              }
            </section>

            {/* Languages box */}
            {
              resume.languages?.length ? (
                <section class="card right-box">
                  <h2>Languages</h2>
                  <ul>
                    {resume.languages.map((l) => (
                      <li>
                        <strong>{l.name}</strong>
                        <span class="muted"> — {l.level}</span>
                      </li>
                    ))}
                  </ul>
                </section>
              ) : null
            }

            {/* Certificates box */}
            {
              resume.certificates?.length ? (
                <section class="card right-box">
                  <h2>Certificates</h2>
                  <ul>
                    {resume.certificates.map((c) => (
                      <li>
                        <strong>{c.title}</strong>
                        <br />
                        <span class="muted">
                          {c.issuer}
                          {c.year ? `, ${c.year}` : ""}
                        </span>
                      </li>
                    ))}
                  </ul>
                </section>
              ) : null
            }
          </div>
        </div>
      </main>
    </div>
  </body>
</html>
